1. Настроить виртуальный хостинг по образцу
<VirtualHost *:80>
    ServerName cafe
    ServerAlias www.cafe

    DocumentRoot /var/www/xle/items/cafe/web
    <Directory /var/www/xle/items/cafe/web>
        AllowOverride All        
    </Directory>

    ErrorLog /var/log/apache2/project_error.log
    CustomLog /var/log/apache2/project_access.log combined
</VirtualHost>

2. Склонировать данный репозиторий

3. В зависимости от ОС и конфигурации решить проблему предоставления web-процессу возможности записывать данные в папку проекта .../var/
4. Composer update
5. Проверить настройки БД в файле app/config/parameters.yml
По умолчанию там - env(DATABASE_URL): 'mysql://root:111@127.0.0.1:3306/symfony_cafe'
6. Если все устраивает:
php bin/console doctrine:database:create
php bin/console doctrine:schema:create
php bin/console doctrine:fixtures:load
  
  Будет создана БД, таблица cafe с несколькими тестовыми записями и таблица xle_user с двумя записями: администратор
  admin, пароль admin, и user, пароль admin
  
* если решать проблему предоставления доступа web-процессу через SUDO chmod - после этих действий скорее всего необходимо
 будет повторить процедуру предоставления доступа
  
Инструкция по использованию
1-й экран
Карта центрируется на точку по адресу ул. Космическая
В правой части карты отображаются кафе в радиусе 500 м от центра карты
В левой части экрана список отображенных кафе с возможностью выбрать кафе для сохранения в БД и посмотреть именно его местоположение
Если кафе уже есть в БД - в таблице эжто отмечается  
При клике на иконку просмотра местоположения кафе карта центрируется на нем и увеличивается зум
  
  ![Иллюстрация к проекту](map1.png)
  
В верхней панели можно задать адрес для поиска и радиус (используется google.maps.places.Autocomplete). После
нажатия кнопки "Поиск по адресу" карта центрируется на выбранный адрес и маркерами на ней отмечаются кафе в заданном радиусе
В левой части выводится таблица с информацией про эти кафе

   ![Иллюстрация к проекту](map2.png)

При клике на любое место карты карта центрируется на нем и, как описано ранее, выдается информация

Если в левой части экрана были выбраны кафе для сохранения в БД, то по нажатию кнопки "Сохранить выбранные кафе" они записываются в БД
Перед сохранением в БД проводится валидация данных Google Map Api и кафе, с ошибками валидации в БД не грузятся.
На экран выводится сообщение о том, какие кафе загрузились, а какие - нет.
В демонстрационных целях кафе с двойными кавычками в названии или адресе валидацию не проходят

   ![Иллюстрация к проекту](map21.png)
   
В левой части экрана отображается список сохраненных в БД кафе (аякс, без перезагрузки страницы)

   ![Иллюстрация к проекту](map22.png)

При нажатии на кнопку прросмотра информации о кафе в таблице раскрывается информационное окошко,
а на карте в месте расположения кафе рисуется маркер и увеличивается зум.

   ![Иллюстрация к проекту](map4.png)
   
При нажатии на кнопку редактирования или удаления производится проверка роли пользователя, если он не администратор
ему предлагается войти в систему, как администратор

   ![Иллюстрация к проекту](mapPswd.png)
   
Если пользователь вошел, как администратор - при нажатии на кнопку редактирования в таблице открывается 
окно редактирования, где можно оставить отзыв и отметить рейтинг кафе

   ![Иллюстрация к проекту](map5.png)

В верхней части левой панели есть кнопка переключения между списком кафе на карте и списком сохраненных кафе

Роут /map/api/cafe возвращает строку JSON с информацией о кафе, сохраненных в БД, у которых установлен рейтинг
в формате 
[
  {
   "id":6,
   "google_place_id":"2167f0a947ba9a6c6e51213098b90175510d2a5b",
   "title":"Наименование кафе",
   "raiting":"рейтинг",
   "review":"отзыв",
   "status":"просмотрено или нет",
   "address":"адрес",
   "lat":50.011548,
   "lang":36.2206864}
]

NB:
Сервис Google Map "https://maps.googleapis.com/maps/api/place/textsearch/output?parameters"
на момент начала выполнения задания вообще не работал на бесплатном ключе, поэтому проект был реализован
с помощью  https://maps.googleapis.com/maps/api/js?key=APIKey&libraries=places&callback=initMap
и сервиса google.maps.places.PlacesService, nearbySearch.

После 14.08.2018 при установке проекта из репозитория Google Map API разрешает сделать только один запрос
Поэтому полностью рабочая версия только у разработчика на локальном хосте((
   

  

